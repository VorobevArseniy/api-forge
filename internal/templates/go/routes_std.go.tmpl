// Code generated by api-generator. DO NOT EDIT.
package routes

import (
    "net/http"

    "{{ .ModuleName }}/api"
    {{ range $svcName, $svc := .Services }}
    "{{ $.ModuleName }}/internal/{{ $svcName }}"
    {{ end }}
)

// SetupRoutes - регистрация роутов stdlib
func SetupRoutes(mux *http.ServeMux) {
    {{ range $svcName, $svc := .Services }}
        // {{ $svcName }} routes
        {{ $handlerVar := printf "%sHandler" (ToLower $svcName) }}
        {{ $serviceVar := printf "%sService" (ToLower $svcName) }}

        {{ $serviceVar }} := {{ $svcName }}.New()
        {{ $handlerVar }} := api.New{{ $handlerVar | ToPascal }}({{ $serviceVar }})

        {{ range $epName, $ep := $svc.Endpoints }}
            mux.HandleFunc("{{$ep.Method}} {{ $ep.Path }}", {{ $handlerVar }}.{{ $epName | ToTitle }})
        {{ end }}
    {{ end }}
}
